import{u as V,T as q,a as z,V as T,v as P,s as Z,i as $,c as G,b as ee,U as te,N as ae,d as ne,f as re,P as ie,W as oe,S as se,O as le,M as ue,o as ce,R as L,F as de,q as me,r as B,C as N,t as fe,w as we,x as pe,y as ve,z as ge,A as he,B as xe,L as Se,D as Te,E as Re}from"./PointerManager-NTn3o2U3.js";/* empty css              */const ye=()=>{const t=V(new q),a=V(new q),m=z(new T),f=z(new T),r=z(new T(1,1)),e=P(Z.xy).mul(f),n=P(e.x,e.y.oneMinus()),p=t.sample(n).toVar(),h=n.sub(.5).mul(r).add(.5),O=h.x.greaterThanEqual(0).and(h.x.lessThanEqual(1)),j=h.y.greaterThanEqual(0).and(h.y.lessThanEqual(1)),k=O.and(j),J=P(1.2).mul(p.xy).mul(m),X=$(h.sub(J),f),Y=a.sample(X).rgb,_=G(Y.add(ee(p.z.mul(.01))),1),K=G(0,0,0,1),Q=te(k,_,K),M=new ae;return M.vertexNode=ne(),M.fragmentNode=Q,re(M,{uTexture:t,uImage:a,uTexelSize:m,uTextureSize:f,uImageScale:r})},c={pixelRatio:.5,solverIteration:5,forceRadius:20,forceCoefficient:1e3,dissipation:.996};let A=0;const d=new ie;let i,y,b,R,g=Math.round(window.innerWidth*window.devicePixelRatio*c.pixelRatio),w=Math.round(window.innerHeight*window.devicePixelRatio*c.pixelRatio),u=new T,o,l,S,C,I,D,W,E,s;await Me();U(performance.now());async function Me(){i=new oe({antialias:!1,forceWebGL:!1}),await i.init(),i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(i.domElement),y=new se,b=new le(-1,1,1,-1,0,1),R=new ue(new ce(2,2)),y.add(R);const t={wrapS:N,wrapT:N,minFilter:B,magFilter:B,format:me,type:de,depthBuffer:!1,stencilBuffer:!1};o=new L(g,w,t),l=new L(g,w,t),H(o),H(l),C=fe(),I=we(),D=pe(),W=ve(),E=ge(),s=ye(),await Pe(s),S=new he().load("texture_demo3.jpg",()=>{F()}),S.minFilter=xe,S.magFilter=Se,S.colorSpace=Te,window.addEventListener("resize",F),d.init(i.domElement),d.addEventListener("firstInteraction",()=>{document.querySelector("#overlay-hint").style.display="none"}),F()}function F(){i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight);const t=window.innerWidth*window.devicePixelRatio,a=window.innerHeight*window.devicePixelRatio;g=Math.round(t*c.pixelRatio),w=Math.round(a*c.pixelRatio),o.setSize(g,w),l.setSize(g,w),d.resizeTarget(c.pixelRatio,i.backend.coordinateSystem===Re?w:0),u.set(1/g,1/w),C.uniforms.uTexelSize.value.copy(u),I.uniforms.uTexelSize.value.copy(u),D.uniforms.uTexelSize.value.copy(u),W.uniforms.uTexelSize.value.copy(u),E.uniforms.uTexelSize.value.copy(u),s.uniforms.uTexelSize.value.copy(u),s.uniforms.uTextureSize.value.set(1/t,1/a),s.uniforms.uImage.value.source?.data&&s.uniforms.uImageScale.value.copy(ze(t,a,s.uniforms.uImage.value.width,s.uniforms.uImage.value.height))}function ze(t,a,m,f){const r=t/a,e=m/f,n=r>=e?r/e:1,p=r>=e?1:e/r;return new T(n,p)}function U(t){const a=(t-A)/1e3;if(d.isPointerDown){const r=C,e=r.uniforms,n=d.pointer.clone().sub(d.prevPointer).multiply(u).multiplyScalar(c.forceCoefficient);e.uData.value=o.texture,e.uForceCenter.value.copy(d.pointer.clone().multiply(u)),e.uForceDeltaV.value.copy(n),e.uForceRadius.value=c.forceRadius,v(r,l),x()}const m=Math.min(Math.max(Math.floor(a*240),1),8),f=a/m;for(let r=0;r<m;r++){{const e=I,n=e.uniforms;n.uData.value=o.texture,n.uDeltaT.value=f,n.uDissipation.value=c.dissipation,v(e,l),x()}{const e=D,n=e.uniforms;n.uData.value=o.texture,v(e,l),x()}for(let e=0;e<c.solverIteration;e++){const n=W,p=n.uniforms;p.uData.value=o.texture,v(n,l),x()}{const e=E,n=e.uniforms;n.uData.value=o.texture,v(e,l),x()}}{const r=s,e=r.uniforms;e.uTexture.value=o.texture,s.uniforms.uImage.value=S,v(r,null)}d.updatePreviousPointer(),A=t,requestAnimationFrame(U)}function H(t){i.setRenderTarget(t),i.clearColor(),i.setRenderTarget(null)}function v(t,a){R.material=t,i.setRenderTarget(a),i.render(y,b),i.setRenderTarget(null)}function x(){[o,l]=[l,o]}async function Pe(t){R.material=t;const a=await i.debug.getShaderAsync(y,b,R);console.log(a.vertexShader),console.log(a.fragmentShader)}
